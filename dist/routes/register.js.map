{"version":3,"sources":["../../src/routes/register.js"],"names":[],"mappings":"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","file":"register.js","sourcesContent":["import express from 'express'\nimport Mongo from '../server.js';\nimport {User} from '../models/user.js';\nimport config from '../config.js';\nimport utilities from '../utilities.js';\nimport jwt from 'jsonwebtoken';\nimport bodyParser from 'body-parser';\n\nvar router = express.Router();\n\nrouter.get('/homepage/:email/:pass',(req,res) => {\n  var user = new User(req.params.email);\n  user.setPassword(req.params.pass).then(()=> {\n    return user.save();\n  })\n\t.then((resp) => {\n    res.render('home', {  \"email\":req.params.email,\n                          \"token\":resp.message.User.token,\n                       \"password\":\"your_password\",\n                             \"id\": resp.message.User._id\n                       });\n  })\n\t.catch((err) => {\n\t\tres.status(err.code).json(err.message);\n\t})\n});\n\nrouter.post('/',(req,res) => {\n  var user = new User(req.body.email);\n  user.setPassword(req.body.pass).then(()=> {\n    return user.save();\n  })\n\t.then((resp) => {\n    console.log(resp);\n      var html = \"<p>please click on the link to confirm account<p></br><a href='http://hey-pi.com/confirm?token=\"+ resp.message.token + \"'>confirm account...</a>\"\n      utilities.sendEmail(resp.message.email,'Welcome to Hey-p.i! Please click to confirm', html);\n     res.status(resp.code).json(resp.message);\n  })\n\t.catch((err) => {\n    console.log(err);\n\t\tres.status(err.code).json(err.message);\n\t})\n});\n\nrouter.post('/:email/:pass',(req,res) => {\n\tvar user = { email: req.params.email, pass: req.params.pass};\n  user.setPassword(req.body.pass).then(()=> {\n    return user.save();\n  })\n\t.then((resp) => {\n     res.status(resp.code).json(resp.message);\n  })\n\t.catch((err) => {\n\t\tres.status(err.code).json(err.message);\n\t})\n});\n\n\nexport default router\n"]}